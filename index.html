<!-- to do: -->
<!--  add sound? -->
<!-- add 3d model credits -->
<!---->
<!---->

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sahara Desert Tour</title>
    <meta
      name="description"
      content="A virtual reality educational tour of the sahara desert"
    />
    <link rel="stylesheet" href="./css/index.css" />
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.0.0/dist/aframe-extras.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.1/dist/aframe-environment-component.min.js"></script>
    <script src="./js/info-message.js"></script>
    <script src="./js/highlight.js"></script>
    <script src="./js/info-panel.js"></script>
  </head>
  <body>
    <nav class="navbar">
      <div class="container">
        <div class="inner-nav">
          <div class="logo">Sahara VR</div>
          <div>
            <a href="/1">About</a>
          </div>
        </div>
      </div>
    </nav>
    <div class="container">
      <div class="scene-container">
        <div class="scene">
          <a-scene
            background="color: #212"
            environment="preset: egypt; skyColor: #00aaff; horizonColor: #fff; shadow: true; shadowSize: 10; dressingAmount: 5; dressingVariance: 1 1 1;"
            cursor="rayOrigin: mouse; fuse: false"
            raycaster="objects: .raycastable"
            info-message="htmlSrc: #messageText"
            embedded
          >
            <a-assets>
              <a-asset-item id="messageText" src="message.html"></a-asset-item>
              <img id="ground" src="assets/textures/sand.jpg" />
              <img id="ground-NRM" src="assets/textures/sand-NRM.jpg" />
              <img id="floor" src="assets/textures/terracotta-tiles.jpg" />
              <img
                id="floor-NRM"
                src="assets/textures/terracotta-tiles-NRM.jpg"
              />
              <a-asset-item
                id="camel"
                src="assets/3d-models/camel/scene.gltf"
              ></a-asset-item>
              <a-asset-item
                id="palm-tree"
                src="assets/3d-models/palm-tree/scene.gltf"
              ></a-asset-item>
              <a-asset-item
                id="cactus"
                src="assets/3d-models/cactus/scene.gltf"
              ></a-asset-item>
              <a-asset-item
                id="pyramid"
                src="assets/3d-models/pyramid/scene.gltf"
              ></a-asset-item>
              <a-asset-item
                id="coffins"
                src="assets/3d-models/coffins/scene.gltf"
              ></a-asset-item>
              <a-asset-item
                id="desert-winds"
                src="assets/3d-models/desert-winds/scene.gltf"
              ></a-asset-item>
              <img
                id="climatePoster"
                src="./assets/images/sahara.jpg"
                crossorigin="anonymous"
              />
              <img
                id="wildlifePoster"
                src="./assets/images/sahara-fox.jpg"
                crossorigin="anonymous"
              />
              <img
                id="peoplePoster"
                src="./assets/images/sahara-people.jpg"
                crossorigin="anonymous"
              />
              <a-mixin
                id="frame"
                geometry="primitive: plane; width: 0.5783552; height: 0.8192"
                material="color: white; shader: flat"
                animation__scale="property: scale; to: 1.2 1.2 1.2; dur: 200; startEvents: mouseenter"
                animation__scale_reverse="property: scale; to: 1 1 1; dur: 200; startEvents: mouseleave"
              ></a-mixin>
              <a-mixin
                id="poster"
                geometry="primitive: plane; width: 0.544768; height: 0.786432"
                material="color: white; shader: flat"
                material="shader: flat"
                position="0 0 0.005"
              ></a-mixin>
              <a-mixin
                id="cardImage"
                geometry="primitive: plane; width: 1.5; height: 0.81"
                material="src: #people; shader: flat; transparent: true"
                position="0 0.495 0.002"
              ></a-mixin>
            </a-assets>

            <!-- intro message -->
            <a-entity position="0 3 -5">
              <a-plane
                src="./assets/images/sahara.jpg"
                height="1"
                width="6"
                opacity="1"
              ></a-plane>
              <a-text
                value="Welcome to the Sahara Desert!\n\nClick the cards to learn more, and explore!"
                align="center"
                color="#fff"
              ></a-text>
            </a-entity>
            <!-- intro message -->

            <a-entity
              gltf-model="#camel"
              position="-5 0.2 -5"
              scale="1 1 1"
              modify-materials
            ></a-entity>

            <a-entity
              gltf-model="#cactus"
              position="-2 0.2 -5"
              scale="1 1 1"
              modify-materials
            ></a-entity>

            <a-entity
              gltf-model="#desert-winds"
              position="4 -3 -10"
              scale="1 1 1"
              animation-mixer
            ></a-entity>

            <!--<a-entity
              gltf-model="#camel"
              position="-30 0.2 -30"
              scale="5 5 5"
              modify-materials
            ></a-entity>-->

            <a-entity
              gltf-model="#palm-tree"
              position="-2 0.2 -10"
              scale="1 1 1"
              modify-materials
            ></a-entity>

            <a-entity
              gltf-model="#pyramid"
              position="10 0 -100"
              scale="10 10 10"
              modify-materials
            ></a-entity>

            <a-entity
              gltf-model="#coffins"
              position="10 0 -100"
              scale="0.1 0.1 0.1"
              modify-materials
              animation-mixer
            ></a-entity>

            <a-entity
              id="background"
              position="0 0 0"
              geometry="primitive: sphere; radius: 2.0"
              material="color: red; side: back; shader: flat"
              scale="0.001 0.001 0.001"
              visible="false"
              class="raycastable"
            >
            </a-entity>
            <a-entity
              position="0 1.6 0"
              camera
              look-controls="magicWindowTrackingEnabled: false; touchEnabled: false; mouseEnabled: false"
              wasd-controls="acceleration:200; fly:true;"
            >
              <a-entity
                id="fadeBackground"
                geometry="primitive: sphere; radius: 2.5"
                material="color: black; side: back; shader: flat; transparent: true; opacity: 0.6"
                visible="false"
              >
              </a-entity>
            </a-entity>

            <a-entity
              id="leftHand"
              laser-controls="hand: left"
              raycaster="objects: .raycastable"
            ></a-entity>
            <a-entity
              id="rightHand"
              laser-controls="hand: right"
              raycaster="objects: .raycastable"
              line="color: #118A7E"
            ></a-entity>
            <!-- info panel ui -->
            <a-entity id="ui" position="0 1.6 -2.5">
              <a-entity id="menu" highlight>
                <a-entity
                  id="climateButton"
                  position="-0.8 0 0"
                  mixin="frame"
                  class="raycastable menu-button"
                >
                  <a-entity
                    material="src: #climatePoster;"
                    mixin="poster"
                  ></a-entity>
                </a-entity>
                <a-entity
                  id="wildlifeButton"
                  position="0 0 0"
                  mixin="frame"
                  class="raycastable menu-button"
                >
                  <a-entity
                    material="src: #wildlifePoster"
                    mixin="poster"
                  ></a-entity>
                </a-entity>
                <a-entity
                  id="peopleButton"
                  position="0.8 0 0"
                  mixin="frame"
                  class="raycastable menu-button"
                >
                  <a-entity
                    material="src: #peoplePoster"
                    mixin="poster"
                  ></a-entity>
                </a-entity>
              </a-entity>
              <a-entity
                id="infoPanel"
                position="0 0 0.5"
                info-panel
                visible="false"
                scale="0.001 0.001 0.001"
                geometry="primitive: plane; width: 1.5; height: 1.8"
                material="color: #333333; shader: flat; transparent: false"
                class="raycastable"
              >
                <a-entity
                  id="infoTitle"
                  position="-0.65 1 0"
                  text="shader: msdf; anchor: left; width: 1.3; font: https://cdn.aframe.io/examples/ui/Viga-Regular.json; color: white;"
                ></a-entity>
                <a-entity
                  id="infoDescription"
                  position="-0.65 0.7 0"
                  text="baseline: top; shader: msdf; anchor: left;  width: 1.3;  font: https://cdn.aframe.io/examples/ui/Viga-Regular.json; color: white;"
                ></a-entity>
              </a-entity>
            </a-entity>
            <!-- info panel ui -->
            <a-plane
              material="color: #FFFFFF;
              src: #floor;
              repeat: 10 10;
              normal-map: #floor-NRM;
              normal-texture-repeat: 10 10;
              roughness: 0.7;
              side: double;"
              geometry="primitive: circle; radius: 0.2"
              rotation="-90 0 0"
              scale="20 20 1"
              position="0 0.2 0"
            ></a-plane>
          </a-scene>
        </div>
      </div>
    </div>
  </body>
</html>
